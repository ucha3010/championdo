<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml" lang="es">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

		<link rel="stylesheet" href="https://unpkg.com/bootstrap@5.3.2/dist/css/bootstrap.min.css" />
		<link rel="stylesheet" href="https://unpkg.com/bs-brain@2.0.3/components/navbars/navbar-1/assets/css/navbar-1.css" />
		<link rel="stylesheet" href="#" th:href="@{/css/style.css}" />
		<link rel="stylesheet" href="#" th:href="@{/imgs/icons/icofont.min.css}" />

		<script type="text/javascript" th:src="@{/js/utils.js}"></script>
		<script src="https://unpkg.com/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

		<title>Selección gimnasio</title>

		<script>

			function confirmDelete(controller, id){
				if(confirm("¿Seguro que desea eliminar la inscripción seleccionada?")){
					var relativeUrl = controller + "/eliminarInscripcion/" + id;
					var domain = getDomain(location.href);
					location.href = domain + relativeUrl;
					return true;
				}
				return false;
			}

			function goDetail(controller, id){
				var relativeUrl = controller + "/getInscripcion/" + id;
				var domain = getDomain(location.href);
				location.href = domain + relativeUrl;
			}
		</script>
	</head>
	<body>
		<form th:action="@{/logout}" method="POST" id="formLogout"></form>
		<div class="container">
			<h1>
				¡Hola <span th:text="${usuario.name}"></span>!
				<a href="#" th:href="@{/usuario/formularioUsuario}"><span class="icofont-duotone icofont-manage-user"></span></a>
			</h1>
		</div>
		<nav sec:authorize="isAuthenticated()" class="navbar navbar-expand-lg bg-light bsb-navbar bsb-navbar-hover bsb-navbar-caret">
			<div class="container">
				<a class="navbar-brand" href="#">
					<img src="#" th:src="@{/imgs/MiLogo.jpg}" alt="" width="180">
				</a>
				<button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar">
					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-list" viewBox="0 0 16 16">
						<path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z" />
					</svg>
				</button>
				<div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
					<div class="offcanvas-header">
						<h5 class="offcanvas-title" id="offcanvasNavbarLabel">Menu</h5>
						<button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
					</div>
					<div class="offcanvas-body flex-grow-0 d-lg-inline">
						<ul class="navbar-nav justify-content-end">
							<li th:each="menu1, iStat : ${menu1List}" class="nav-item dropdown pe-2">
								<a class="nav-link dropdown-toggle" href="#!" th:id="'dropdown' + ${iStat.index}" role="button" data-bs-toggle="dropdown" aria-expanded="false"><span th:text="${menu1.nombre}"></span></a>
								<ul class="dropdown-menu border-0 shadow bsb-zoomIn" th:attr="aria-labelledby='dropdown' + ${iStat.index}">
									<li th:if="${menu1.menu2ModelList != null}" th:each="menu2 : ${menu1.menu2ModelList}"><a class="dropdown-item" href="#" th:href="@{__${menu2.url}__}"><span th:text="${menu2.nombre}"></span> <span th:if="${__${menu2.aviso}__ != null}" class="badge" th:text="${__${menu2.aviso}__}"></span></a></li>
								</ul>
							</li>
							<li class="nav-item">
								<a class="nav-link" href="#">Ayuda</a>
							</li>
							<li class="nav-item">
								<a class="nav-link" href="#">Contacto</a>
							</li>
							<li class="nav-item">
								<a class="nav-link" href="#" th:attr="onclick=|logout()|"><span class="icofont-logout" aria-hidden="true"></span> Salir</a>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</nav>

		<div class="container">
			<section>
				<div class="row">
					<div class="col-xs-2 mb-1">
					</div>

					<div class="col-xs-8 mb-10 colorGreen">
						<h1>Inscripción a <span th:text="${inscripcionA}"></span></h1>
					</div>

					<div class="col-xs-2 mb-1">
						<a class="btn btn-info pull-right" href="#" th:href="@{/principal/}">Volver</a>
					</div>
				</div>
			</section>


			<section sec:authorize="isAuthenticated()" class="text-center margenArribaAbajo3Porc">
				<div class="accordion accordion-flush" id="accordionFlushExample">
					<div class="accordion-item">
						<h2 class="accordion-header">
							<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseOne" aria-expanded="false" aria-controls="flush-collapseOne">
								Gimnasio 1
							</button>
						</h2>
						<div id="flush-collapseOne" class="accordion-collapse collapse" data-bs-parent="#accordionFlushExample">
							<div class="accordion-body">Descripción. Placeholder content for this accordion, which is intended to demonstrate the <code>.accordion-flush</code> class. This is the first item's accordion body.</div>
						</div>
					</div>
					<div class="accordion-item">
						<h2 class="accordion-header">
							<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwo" aria-expanded="false" aria-controls="flush-collapseTwo">
								Gimnasio 2
							</button>
						</h2>
						<div id="flush-collapseTwo" class="accordion-collapse collapse" data-bs-parent="#accordionFlushExample">
							<div class="accordion-body">Descripción. Placeholder content for this accordion, which is intended to demonstrate the <code>.accordion-flush</code> class. This is the second item's accordion body. Let's imagine this being filled with some actual content.</div>
						</div>
					</div>
					<div class="accordion-item">
						<h2 class="accordion-header">
							<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseThree" aria-expanded="false" aria-controls="flush-collapseThree">
								Gimnasio 3
							</button>
						</h2>
						<div id="flush-collapseThree" class="accordion-collapse collapse" data-bs-parent="#accordionFlushExample">
							<div class="accordion-body">Descripción. Placeholder content for this accordion, which is intended to demonstrate the <code>.accordion-flush</code> class. This is the third item's accordion body. Nothing more exciting happening here in terms of content, but just filling up the space to make it look, at least at first glance, a bit more representative of how this would look in a real-world application.</div>
						</div>
					</div>
				</div>
			</section>

			<section sec:authorize="isAuthenticated()">
				<table class="table table-striped table-hover">
					<thead>
					<tr>
						<th>Fecha de realización</th>
						<th>Inscripción de</th>
						<th></th>
						<th></th>
					</tr>
					</thead>
					<tbody>
					<tr th:each="autorizacion : ${inscripciones}">
						<td th:attr="onclick=|goDetail('${controller}','${autorizacion.id}')|">
							<span th:text="${#calendars.format(autorizacion.fechaInscripcion,'dd/MM/yyyy HH:mm')}"></span>
						</td>
						<td th:attr="onclick=|goDetail('${controller}','${autorizacion.id}')|">
							<span th:if="${autorizacion.autorizadoNombre != null}" th:text="${autorizacion.autorizadoNombre+' '+autorizacion.autorizadoApellido1+' '+autorizacion.autorizadoApellido2}"></span>
							<span th:if="${autorizacion.autorizadoNombre == null}" th:text="${autorizacion.mayorNombre+' '+autorizacion.mayorApellido1+' '+autorizacion.mayorApellido2}"></span>
						</td>
						<td>
							<a th:if="${deleteEnable}" th:attr="onclick=|return confirmDelete('${controller}','${autorizacion.id}')|"><span class="glyphicon glyphicon-trash textDecoration-none"></span></a>
						</td>
						<td>
							<a th:if="${autorizacion.inscripcionFirmada and autorizacion.domiciliacionSEPA and not autorizacion.domiciliacionSEPAFirmada}" class="colorRed" href="#" th:href="@{/__${controller}__/normativa-sepa/__${autorizacion.id}__}">¡Toque aquí para adjuntar documentación faltante!</a>
							<a th:if="${!autorizacion.inscripcionFirmada}" class="colorRed" href="#" th:href="@{/seguridad/nuevoEnvioCodigo/__${operativaOriginal}__/__${autorizacion.id}__}">¡Inscripción no firmada! Toque aquí para firmar</a>
						</td>
					</tr>
					</tbody>
				</table>
			</section>

			<section th:if="${inscripciones != null}" class="text-center margenArribaAbajo3Porc">
				<div class="col-xs-10">
				</div>

				<div class="col-xs-2">
					<a class="btn btn-info pull-right" href="#" th:href="@{/principal/}">Volver</a>
				</div>
			</section>
		</div>
	</body>
</html>