<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport"
		content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	
	<!-- Bootstrap CSS -->
	<link rel="stylesheet"
		href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
	
	<link href="#" th:href="@{/css/style.css}" rel="stylesheet" />

	<script th:inline="javascript">
        function miFuncion(numeroVuelta, valorEntrada) {
			// Crear un objeto con los datos que deseas enviar
			var claveEntrada = document.getElementById("clave" + numeroVuelta).value;
			var objeto = {
				clave: claveEntrada,
				valor: valorEntrada
			};

			var xhr = new XMLHttpRequest();
			xhr.open("POST", "/adminUtil/updateUtilNoAnswer", true);
			xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
			xhr.send(JSON.stringify(objeto));

			// Opcionalmente, puedes manejar la respuesta del controlador aquí
			xhr.onreadystatechange = function() {
				if (xhr.readyState === 4 && xhr.status === 200) {
					console.log("Solicitud AJAX exitosa.");
				}
			};
        }
    </script>
	
	<title>Parámetros</title>

	<!-- Optional JavaScript -->
	<!-- jQuery first, then Popper.js, then Bootstrap JS -->
	<script
			src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
			integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
			crossorigin="anonymous"></script>
	<script
			src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
			integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
			crossorigin="anonymous"></script>
	<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
			integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
			crossorigin="anonymous"></script>

</head>
<body>
	<section>
		<div th:if="${updateOK != null}" class="alert alert-success textAlignCenter" role="alert"><span th:text="${updateOK}"></span></div>
	</section>

	<div class="container">
		<h1>¡Hola <span th:text="${usuario.name}"></span>! <a href="#" th:href="@{/usuario/formularioUsuario}"><span class="glyphicon glyphicon-user"></span></a></h1>

		<nav class="navbar navbar-default" role="navigation">
			<form th:action="@{/logout}" method="POST">
				<button class="btn btn-primary pull-right" type="submit"><span class="glyphicon glyphicon-log-out" aria-hidden="true"></span> Salir</button>
			</form>
		</nav>

		<section>
			<div class="row">
				<div class="col-xs-2 mb-1">
				</div>

				<div class="col-xs-8 mb-10 colorGreen">
					<h1>Parámetros</h1>
				</div>

				<div class="col-xs-2 mb-1">
					<a class="btn btn-info pull-right" href="#" th:href="@{/adminGimnasio/}">Volver</a>
				</div>
			</div>
		</section>

		<section  sec:authorize="hasRole('ROLE_ADMIN')">
			<div class="row mb-3" th:each="unit : ${utilListCorreo}">
				<form action="#" th:action="@{/adminUtil/updateUtil}" th:object="${utilModel}" method="post">

					<input type="hidden" name="clave" th:value="${unit.clave}"/>

					<div class="col-xs-4">
						<label th:for="${unit.clave}"><span th:text="#{${unit.clave}}"></span></label>
					</div>

					<div class="col-xs-6">
						<input type="text" th:value="${unit.valor}" name="valor" th:id="${unit.clave}" class="form-control" />
					</div>

					<div class="col-xs-2">
						<button class="btn btn-primary" type="submit">Actualizar</button>
					</div>

				</form>
			</div>

			<div class="row mb-3" th:each="unitInscripciones, iterStat : ${utilListInscripciones}">
				<form action="#" th:action="@{/adminUtil/updateUtil}" th:object="${utilModel}" method="post">

					<input type="hidden" name="clave" th:value="${unitInscripciones.clave}"/>

					<div class="col-xs-6">
						<label th:for="${unitInscripciones.clave}"><span th:text="#{${unitInscripciones.clave}}"></span></label>
					</div>

					<div class="col-xs-4">
						<select name="valor" class="form-control form-control-lg" onchange="this.form.submit()">
							<option th:each="lsn : ${listaSiNo}" th:value="${lsn.valor}" th:text="${lsn.clave}" th:selected="${lsn.valor == unitInscripciones.valor}"></option>
						</select>
					</div>

					<div class="col-xs-2">
					</div>
				</form>
			</div>
		</section>


		<section  sec:authorize="hasRole('ROLE_ADMIN')" class="backgroundColorAquamarine">
			<form action="#" th:action="@{/adminGimnasio/updateGimnasio}" th:object="${gimnasioModel}" method="post">

				<input type="hidden" name="id" th:value="${gimnasioModel.id}"/>

				<div class="row">
					<div class="col-xs-4">
						<label for="nombreGimnasio">Nombre gimnasio</label>
					</div>
					<div class="col-xs-6">
						<input type="text" th:field="*{nombre}" id="nombreGimnasio" class="form-control" placeholder="Nombre gimnasio"/>
					</div>

					<div class="col-xs-2">
					</div>
				</div>

				<div class="row">
					<div class="col-xs-10">
					</div>

					<div class="col-xs-2">
						<button class="btn btn-primary" type="submit">Actualizar</button>
					</div>
				</div>

				<div class="row mb-3">
					<div class="col-xs-4">
						<label for="direccionGimnasio">Dirección gimnasio</label>
					</div>
					<div class="col-xs-6">
						<input type="text" th:field="*{direccion}" id="direccionGimnasio" class="form-control" placeholder="Dirección gimnasio"/>
					</div>

					<div class="col-xs-2">
					</div>
				</div>

			</form>
		</section>

		<div class="row">
			<div class="col-xs-10">
			</div>
			<div class="col-xs-2">
				<a class="btn btn-info pull-right" href="#" th:href="@{/adminGimnasio/}">Volver</a>
			</div>
		</div>
	</div>
</body>
</html>